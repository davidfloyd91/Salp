(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,a,t){"use strict";t.r(a);var n,r,s,l=t(17),o=t(1),c=t(0),i=t.n(c),p=t(49),u=t.n(p),m=(t(58),t(5)),h=t(6),d=t(8),b=t(7),y=t(9),f=t(2),E=t(20),v=t(3),g=t(51),S=t.n(g),C=function(e){var a=function(a){n=window.pageYOffset,e.newValue(a.target.value,e.x,e.y,n)},t=function(e){e.preventDefault()};return i.a.createElement(c.Fragment,null,1===e.y?i.a.createElement("form",{onSubmit:t,className:"cell"},i.a.createElement("input",{type:"text",value:e.value,onChange:a})):2===e.y?i.a.createElement("form",{onSubmit:t,className:"cell"},i.a.createElement("input",{type:"number",value:e.value,onChange:a})):null)},O=function(e){return i.a.createElement(c.Fragment,null,function(){for(var a=[],t=0;t<e.y;t++)a.push(t);return a.map(function(a){var t="".concat(e.x+1,"-").concat(a+1);return i.a.createElement(C,{key:t,x:e.x+1,y:a+1,value:e.values[a],newValue:e.newValue})})}(),i.a.createElement("button",{className:"danger",onClick:function(){return e.removeRow(e.x)}}," \xd7 "))},T=(t(21),function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(t=Object(d.a)(this,(e=Object(b.a)(a)).call.apply(e,[this].concat(l)))).populate=function(){r=t.props.grid;for(var e=[],a=0;a<t.props.y;a++)e=[].concat(Object(v.a)(e),[null]);for(var n=0;n<t.props.x;n++)r=[].concat(Object(v.a)(r),[e]);t.props.setGrid(r)},t.renderRows=function(){if(r&&r[0])return r.map(function(e,a){return i.a.createElement("div",{className:"row",key:a},i.a.createElement(O,{key:a,id:a,x:a,y:t.props.y,values:e,newValue:t.newValue,removeRow:t.removeRow}))})},t.newValue=function(e,a,n,l){r=[].concat(Object(v.a)(r.slice(0,a-1)),[[].concat(Object(v.a)(r[a-1].slice(0,n-1)),[e],Object(v.a)(r[a-1].slice(n)))],Object(v.a)(r.slice(a))),t.props.dispatch({type:"SET_GRID",payload:r}),s=l,t.props.dispatch({type:"SET_PAGE_SCROLL",payload:s})},t.addRow=function(){r=[].concat(Object(v.a)(r),[[null,null]]),t.props.dispatch({type:"SET_GRID",payload:r}),t.props.dispatch({type:"SET_ROWS",payload:r.length}),s=window.pageYOffset,t.props.dispatch({type:"SET_PAGE_SCROLL",payload:s})},t.removeRow=function(e){r=[].concat(Object(v.a)(r.slice(0,e)),Object(v.a)(r.slice(e+1))),t.props.dispatch({type:"SET_GRID",payload:r}),t.props.dispatch({type:"SET_ROWS",payload:r.length}),s=window.pageYOffset,t.props.dispatch({type:"SET_PAGE_SCROLL",payload:s})},t}return Object(y.a)(a,e),Object(h.a)(a,[{key:"componentDidMount",value:function(){this.populate()}},{key:"render",value:function(){return i.a.createElement("div",{className:"center"},i.a.createElement("div",{className:"table"},i.a.createElement("h5",{className:"tableHead"},"Labels"),i.a.createElement("h5",{className:"tableHead"},"Values"),this.renderRows()),i.a.createElement("button",{onClick:this.addRow},"Add a row"))}}]),a}(c.Component));var N,w=Object(f.b)(function(e){return{grid:e.grid,x:e.rows,y:e.columns}})(T);var j=Object(f.b)(function(e){return{color:e.color,colors:e.colors,chartType:e.chartType,labelDisplay:e.labelDisplay,horizontal:e.horizontal,label:e.label,max:e.max,min:e.min,radius:e.radius,tension:e.tension,ticks:e.ticks,title:e.title,xLabel:e.xLabel,yLabel:e.yLabel}})(function(e){var a=function(a){N=window.pageYOffset,e.customize(a,N)},t=[{name:"highlighterPink",hex:"#ef5777"},{name:"darkPeriwinkle",hex:"#575fcf"},{name:"megaman",hex:"#4bcffa"},{name:"freshTurquoise",hex:"#34e7e4"},{name:"mintGreen",hex:"#0be881"},{name:"sizzlingRed",hex:"#f53b57"},{name:"freeSpeechBlue",hex:"#3c40c6"},{name:"spiroDiscoBall",hex:"#0fbcf9"},{name:"jadeDust",hex:"#00d8d6"},{name:"greenTeal",hex:"#05c46b"},{name:"narenjiOrange",hex:"#ffc048"},{name:"yrielYellow",hex:"#ffdd59"},{name:"sunsetOrange",hex:"#ff5e57"},{name:"chromeYellow",hex:"#ffa801"},{name:"vibrantYellow",hex:"#ffd32a"},{name:"redOrange",hex:"#ff3f34"},{name:"londonSquare",hex:"#808e9b"},{name:"hintOfElusiveBlue",hex:"#d2dae2"}];return i.a.createElement("div",{className:"pie"===e.chartType||"bar"===e.chartType&&e.horizontal?"customizationPanePie":"customizationPane"},i.a.createElement("h4",{className:"customizationPaneHeader"},"Customize your chart"),e.chartType[0]?i.a.createElement(c.Fragment,null,i.a.createElement("div",{className:"pie"===e.chartType||"bar"===e.chartType&&e.horizontal?"customizationCardPie left":"customizationCard left"},i.a.createElement("h4",{className:"customizationHeader"},"Labels"),i.a.createElement("label",{htmlFor:"title",className:"smallHead"},"Title "),i.a.createElement("input",{onChange:a,name:"title",value:e.title,className:"customizationInput"}),"pie"!==e.chartType?i.a.createElement(c.Fragment,null,i.a.createElement("label",{htmlFor:"label",className:"smallHead"}," Top label "),i.a.createElement("input",{onChange:a,name:"label",value:e.label,className:"customizationInput"}),i.a.createElement("label",{htmlFor:"displayLabel",className:"smallHeadInline"}," Display top label? "),i.a.createElement("input",{type:"checkbox",onChange:a,name:"displayLabel",checked:e.labelDisplay,className:"labelCheckBox"}),i.a.createElement("label",{htmlFor:"xLabel",className:"smallHead"}," Horizontal axis label "),i.a.createElement("input",{onChange:a,name:"xLabel",value:e.xLabel,className:"customizationInput"}),i.a.createElement("label",{htmlFor:"yLabel",className:"smallHead"}," Vertical axis label "),i.a.createElement("input",{onChange:a,name:"yLabel",value:e.yLabel,className:"customizationInput"}),"bar"===e.chartType?i.a.createElement(c.Fragment,null,e.horizontal?i.a.createElement("button",{className:"customizationButton",onClick:a,name:"horizontal"},"Switch to vertical bars"):i.a.createElement("button",{className:"customizationButton",onClick:a,name:"horizontal"},"Switch to horizontal bars")):null):null),i.a.createElement("div",{className:"pie"===e.chartType||"bar"===e.chartType&&e.horizontal?"customizationCardPie right":"customizationCard right"},i.a.createElement("h4",{className:"customizationHeader"},"Display"),"line"===e.chartType?i.a.createElement(c.Fragment,null,i.a.createElement("label",{htmlFor:"tension",className:"smallHead"}," Line tension "),i.a.createElement("input",{onChange:a,name:"tension",placeholder:e.tension,className:"customizationInput"}),i.a.createElement("label",{htmlFor:"radius",className:"smallHead"}," Point radius "),i.a.createElement("input",{onChange:a,name:"radius",placeholder:e.radius,className:"customizationInput"}),i.a.createElement("label",{htmlFor:"color",className:"smallHead"}," Color "),i.a.createElement("div",{className:"colorsContainer"},t.map(function(e){return i.a.createElement("div",{key:e.hex},i.a.createElement("input",{className:e.name+" colorRadio",onChange:a,type:"radio",name:"color",value:e.hex}),i.a.createElement("div",{className:e.name+" colorBox"},"HOWDY!!!"))}))):i.a.createElement(c.Fragment,null,i.a.createElement("label",{className:"smallHead"}," Colors "),i.a.createElement("div",{className:"pie"===e.chartType||"bar"===e.chartType&&e.horizontal?"colorsContainerPie":"colorsContainer"},t.map(function(t){return i.a.createElement("div",{key:t.hex},i.a.createElement("input",{onChange:a,type:"checkbox",name:"colors",value:t.hex,checked:e.colors.includes(t.hex)}),i.a.createElement("div",{className:t.name+" colorBox"},"HOWDY!!!"))})))),i.a.createElement(c.Fragment,null,"pie"===e.chartType||e.horizontal?null:i.a.createElement("div",{className:"customizationCard center"},i.a.createElement("h4",{className:"customizationHeader"},"Scales"),i.a.createElement("label",{htmlFor:"min",className:"smallHead"}," Vertical minimum "),i.a.createElement("input",{onChange:a,name:"min",placeholder:e.min,className:"customizationInput"}),i.a.createElement("label",{htmlFor:"max",className:"smallHead"}," Vertical maximum "),i.a.createElement("input",{onChange:a,name:"max",placeholder:e.max,className:"customizationInput"}),i.a.createElement("label",{htmlFor:"ticks",className:"smallHead"}," Tick value "),i.a.createElement("input",{onChange:a,name:"ticks",placeholder:e.ticks,className:"customizationInput"})))):null)}),_="https://salp-api.herokuapp.com",k=t(63),L=(t(74),t(94));function x(e){var a=L.cloneDeep(Object(o.a)({},e)),t=a.data._datasets;return delete a.data._datasets,a.data.datasets=t,a}function I(e,a){a.dispatch({type:"SET_CHART",payload:e})}function z(e,a){a.dispatch({type:"SET_CHARTS",payload:e})}function A(e,a){a.dispatch({type:"SET_CHART_TYPE",payload:e})}function D(e){e.dispatch({type:"SET_DEFAULT"})}function R(e,a){a.dispatch({type:"SET_LONG",payload:e})}function H(e,a){a.dispatch({type:"SET_USER_ID",payload:e})}function F(e){e.dispatch({type:"TOGGLE_NEW"})}function P(e){var a=k.get("jwt");a?fetch("".concat(_,"/auto_login"),{headers:{Authorization:a}}).then(function(e){return e.json()}).then(function(a){a.errors?alert(a.errors):(H(a.id,e),"/login"!==e.history.location.pathname&&"/signup"!==e.history.location.pathname||e.history.push("/charts"))}):(H(0,e),"/signup"!==e.history.location.pathname&&e.history.push("/login"))}var B,G,M,U=Object(f.b)(function(e){return{chart:e.chart,chartType:e.chartType,columns:e.columns,edit:e.edit,horizontal:e.horizontal,input:e.input,rows:e.rows,showTable:e.showTable}})(function(e){var a=function(a){a.preventDefault(),e.dispatch({type:"SET_SHOW_TABLE",payload:!0})},t=function(a){A(a,e)},n=function(a){"rows"===a.target.name?e.dispatch({type:"SET_ROWS",payload:a.target.value}):"input"===a.target.name&&e.dispatch({type:"SET_INPUT",payload:a.target.value})};return i.a.createElement(c.Fragment,null,e.chartType[0]?e.chartType[0]?i.a.createElement(c.Fragment,null,i.a.createElement(j,{showTableToTrue:a,customize:e.customize}),i.a.createElement(c.Fragment,null,e.input[0]?"csv"===e.input?i.a.createElement("div",{className:"bottom"},i.a.createElement("h5",null,"Upload your CSV file below:"),i.a.createElement(S.a,{onFileLoaded:function(a){e.setGrid(a)}})):"manual"===e.input?i.a.createElement(c.Fragment,null,e.showTable?i.a.createElement("div",{className:"bottom"},i.a.createElement(w,{setGrid:e.setGrid})):i.a.createElement("div",{className:"bottom"},i.a.createElement("h5",null,"How many rows of data would you like to input?"),i.a.createElement("form",{onSubmit:a},i.a.createElement("input",{onChange:n,type:"number",min:"0",name:"rows",placeholder:"Number of rows",value:e.rows}),i.a.createElement("input",{type:"submit",value:"Go"})))):null:i.a.createElement("div",{className:"bottom"},i.a.createElement("h4",{className:"customizationPaneHeader"},"Input your data"),i.a.createElement("label",{className:"smallHeadInline",htmlFor:"input"},"How would you like to input your data?"),i.a.createElement("select",{name:"input",onChange:n},i.a.createElement("option",{value:""}," "),i.a.createElement("option",{value:"csv"},"Upload CSV"),i.a.createElement("option",{value:"manual"},"Manually"))))):null:i.a.createElement("div",{className:"center"},i.a.createElement("div",{className:"card",onClick:function(){return t("line")}},i.a.createElement("h5",null,"Line"),i.a.createElement("img",{className:"previewImg",alt:"line chart",src:"/assets/linePreview.png"})),i.a.createElement("div",{className:"card",onClick:function(){return t("bar")}},i.a.createElement("h5",null,"Bar"),i.a.createElement("img",{className:"previewImg",alt:"bar chart",src:"/assets/barPreview.png"})),i.a.createElement("div",{className:"card",onClick:function(){return t("pie")}},i.a.createElement("h5",null,"Pie"),i.a.createElement("img",{className:"previewImg",alt:"pie chart",src:"/assets/piePreview.png"}))))}),W=t(18),V=t.n(W),Y=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(d.a)(this,(e=Object(b.a)(a)).call.apply(e,[this].concat(r)))).chartRef=i.a.createRef(),t.buildChart=function(){var e,a,n,r,s,l,o,c,i,p,u,m,h,d=t.chartRef.current.getContext("2d");"undefined"!==typeof B&&B.destroy(),e=t.props.data.map(function(e){return parseFloat(e[1])}),a=t.props.color,n=t.props.label,r=t.props.labelDisplay,s=t.props.data.map(function(e){return e[0]}),l=t.props.max,o=t.props.min,e.forEach(function(e){e>=l&&(l=e,t.props.dispatch({type:"SET_MAX",payload:l})),e<=o&&(o=e,t.props.dispatch({type:"SET_MIN",payload:o}))}),c=t.props.radius,i=t.props.tension,p=t.props.ticks,u=t.props.title,m=t.props.xLabel,h=t.props.yLabel,G={type:"line",data:{labels:s,_datasets:[{label:n,fill:!1,data:e,borderColor:a,lineTension:i,pointRadius:c}]},options:{legend:{display:r},title:{display:!0,text:u},scales:{yAxes:[{ticks:{min:parseFloat(o),max:parseFloat(l),stepSize:parseFloat(p)},scaleLabel:{display:!0,labelString:h}}],xAxes:[{scaleLabel:{display:!0,labelString:m}}]}}},M=x(G),B=new V.a(d,M)},t}return Object(y.a)(a,e),Object(h.a)(a,[{key:"componentDidMount",value:function(){this.buildChart()}},{key:"componentDidUpdate",value:function(){this.buildChart(),this.props.pageScroll&&window.scrollTo(0,this.props.pageScroll)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("canvas",{id:"myChart",ref:this.chartRef}),this.props.edit?i.a.createElement(c.Fragment,null,i.a.createElement("button",{className:"button",onClick:function(){return e.props.updateChart(G,M)}},"Save changes"),i.a.createElement("button",{className:"button",onClick:function(){return e.props.saveChart(G,M)}},"Save as new chart")):i.a.createElement("button",{className:"button",onClick:function(){return e.props.saveChart(G,M)}},"Save chart"))}}]),a}(c.Component);var J,X,K,Z=Object(f.b)(function(e){return{chart:e.chart,color:e.color,data:e.grid,edit:e.edit,label:e.label,labelDisplay:e.labelDisplay,max:e.max,min:e.min,pageScroll:e.pageScroll,radius:e.radius,tension:e.tension,ticks:e.ticks,title:e.title,xLabel:e.xLabel,yLabel:e.yLabel}})(Y),q=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(d.a)(this,(e=Object(b.a)(a)).call.apply(e,[this].concat(r)))).chartRef=i.a.createRef(),t.buildChart=function(){var e,a,n,r,s,l,o,c,i,p,u,m,h=t.chartRef.current.getContext("2d");if("undefined"!==typeof J&&J.destroy(),e=t.props.data.map(function(e){return parseFloat(e[1])}),(a=t.props.colors)[0]){var d=Math.floor(e.length/a.length)+1;if(d>0)for(var b=0;b<d-1;b++)a=[].concat(Object(v.a)(a),Object(v.a)(t.props.colors))}n=t.props.label,r=t.props.labelDisplay,s=t.props.data.map(function(e){return e[0]}),l=t.props.max,o=t.props.min,e.forEach(function(e){e>=l&&(l=e,t.props.dispatch({type:"SET_MAX",payload:l})),e<=o&&(o=e,t.props.dispatch({type:"SET_MIN",payload:o}))}),c=t.props.ticks,i=t.props.title,p=t.props.horizontal?"horizontalBar":"bar",u=t.props.xLabel,m=t.props.yLabel,X={type:p,data:{labels:s,_datasets:[{label:n,fill:!1,data:e,backgroundColor:a}]},options:{legend:{display:r},title:{display:!0,text:i},scales:{yAxes:[{ticks:{min:parseFloat(o),max:parseFloat(l),stepSize:parseFloat(c)},scaleLabel:{display:!0,labelString:m}}],xAxes:[{scaleLabel:{display:!0,labelString:u}}]}}},K=x(X),J=new V.a(h,K)},t}return Object(y.a)(a,e),Object(h.a)(a,[{key:"componentDidMount",value:function(){this.buildChart()}},{key:"componentDidUpdate",value:function(){this.buildChart(),this.props.pageScroll&&window.scrollTo(0,this.props.pageScroll)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("canvas",{id:"myChart",ref:this.chartRef}),this.props.edit?i.a.createElement(c.Fragment,null,i.a.createElement("button",{className:"button",onClick:function(){return e.props.updateChart(X,K)}},"Save changes"),i.a.createElement("button",{className:"button",onClick:function(){return e.props.saveChart(X,K)}},"Save as new chart")):i.a.createElement("button",{className:"button",onClick:function(){return e.props.saveChart(X,K)}},"Save chart"))}}]),a}(c.Component);var $,Q,ee,ae=Object(f.b)(function(e){return{chart:e.chart,chartType:e.chartType,colors:e.colors,data:e.grid,edit:e.edit,horizontal:e.horizontal,label:e.label,labelDisplay:e.labelDisplay,max:e.max,min:e.min,pageScroll:e.pageScroll,ticks:e.ticks,title:e.title,xLabel:e.xLabel,yLabel:e.yLabel}})(q),te=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(d.a)(this,(e=Object(b.a)(a)).call.apply(e,[this].concat(r)))).chartRef=i.a.createRef(),t.buildChart=function(){var e,a,n,r,s=t.chartRef.current.getContext("2d");if("undefined"!==typeof $&&$.destroy(),n=t.props.data.map(function(e){return e[0]}),e=t.props.data.map(function(e){return parseFloat(e[1])}),r=t.props.title,(a=t.props.colors)[0]){var l=Math.floor(e.length/a.length)+1;if(l>0)for(var o=0;o<l-1;o++)a=[].concat(Object(v.a)(a),Object(v.a)(t.props.colors))}ee=x(Q={type:"pie",data:{labels:n,_datasets:[{fill:!1,data:e,backgroundColor:a}]},options:{title:{display:!0,text:r}}}),$=new V.a(s,ee)},t}return Object(y.a)(a,e),Object(h.a)(a,[{key:"componentDidMount",value:function(){this.buildChart()}},{key:"componentDidUpdate",value:function(){this.buildChart(),this.props.pageScroll&&window.scrollTo(0,this.props.pageScroll)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("canvas",{id:"myChart",ref:this.chartRef}),this.props.edit?i.a.createElement(c.Fragment,null,i.a.createElement("button",{className:"button",onClick:function(){return e.props.updateChart(Q,ee)}},"Save changes"),i.a.createElement("button",{className:"button",onClick:function(){return e.props.saveChart(Q,ee)}},"Save as new chart")):i.a.createElement("button",{className:"button",onClick:function(){return e.props.saveChart(Q,ee)}},"Save chart"))}}]),a}(c.Component);var ne,re=Object(f.b)(function(e){return{chart:e.chart,data:e.grid,edit:e.edit,pageScroll:e.pageScroll,title:e.title,colors:e.colors}})(te),se=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(d.a)(this,(e=Object(b.a)(a)).call.apply(e,[this].concat(r)))).setLongIfChart=function(){(t.props.chart||t.props.chartType)&&R(!0,t.props)},t.handleSave=function(e){I(e,t.props),D(t.props),t.props.history.push("/charts/".concat(e.id))},t.discardChart=function(){I(null,t.props),D(t.props),R(!1,t.props),t.props.edit&&t.props.dispatch({type:"SET_EDIT",payload:!1}),t.props.history.push("/charts")},t.updateChart=function(e){var a=!1,n=t.props.chart.id;fetch("".concat(_,"/charts/").concat(n),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:e})}).then(function(e){return e.ok&&(a=!0),e.json()}).then(function(e){a&&t.handleSave(e)})},t.saveChart=function(e){var a=!1;fetch("".concat(_,"/charts"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({user_id:t.props.userId,data:e})}).then(function(e){return e.ok&&(a=!0),e.json()}).then(function(e){a&&t.handleSave(e)})},t.setGrid=function(e){var a=[],n=0;t.props.dispatch({type:"WARN",payload:""}),e.forEach(function(e){if(e[1]&&isNaN(parseFloat(e[1])))a.push([e[0],"0"]),n++;else{if(!e[1])return;a.push(Object(v.a)(e))}}),t.props.dispatch({type:"SET_GRID",payload:a}),n>0&&t.props.dispatch({type:"WARN",payload:"Warning: ".concat(n," y-value(s) not recognized and set to 0. Consider editing your CSV.")})},t.customize=function(e,a){var n=e.target.name,r=e.target.value;if("min"===n&&(isNaN(r)||""===r||r.match(/\s+/)))t.props.dispatch({type:"SET_MIN",payload:-10});else if("max"===n&&(isNaN(r)||""===r||r.match(/\s+/)))t.props.dispatch({type:"SET_MAX",payload:10});else if("ticks"===n&&(isNaN(r)||""===r||r.match(/\s+/)))t.props.dispatch({type:"SET_TICKS",payload:0});else if("tension"===n&&(isNaN(r)||""===r||r.match(/\s+/)))t.props.dispatch({type:"SET_TENSION",payload:.4});else if("radius"===n&&(isNaN(r)||""===r||r.match(/\s+/)))t.props.dispatch({type:"SET_RADIUS",payload:3});else if("colors"===n){if(e.target.checked)ne=Object(v.a)(new Set([].concat(Object(v.a)(t.props.colors),[r])));else{var s=t.props.colors.indexOf(r);ne=[].concat(Object(v.a)(t.props.colors.slice(0,s)),Object(v.a)(t.props.colors.slice(s+1)))}t.props.dispatch({type:"SET_COLORS",payload:ne})}else"horizontal"===n?t.props.dispatch({type:"SET_HORIZONTAL",payload:!t.props.horizontal}):"displayLabel"===n?t.props.dispatch({type:"TOGGLE_LABEL_DISPLAY"}):t.props.dispatch({type:"SET_NAME_TO_VALUE",payload:{key:n,value:r}});t.props.dispatch({type:"SET_PAGE_SCROLL",payload:a})},t}return Object(y.a)(a,e),Object(h.a)(a,[{key:"componentDidMount",value:function(){P(this.props),this.setLongIfChart(),this.props.new||F(this.props)}},{key:"componentDidUpdate",value:function(){this.setLongIfChart()}},{key:"render",value:function(){return i.a.createElement("div",{className:"container"},this.props.edit?i.a.createElement("h4",{className:"customizationPaneHeader"},"Edit ",this.props.chartType," chart"):i.a.createElement("h4",{className:"customizationPaneHeader"},"New ",this.props.chartType," chart")," ","line"===this.props.chartType?i.a.createElement(Z,{saveChart:this.saveChart,updateChart:this.updateChart}):"bar"===this.props.chartType||"horizontalBar"===this.props.chartType?i.a.createElement(ae,{saveChart:this.saveChart,updateChart:this.updateChart}):"pie"===this.props.chartType?i.a.createElement(re,{saveChart:this.saveChart,updateChart:this.updateChart}):null," ",this.props.chartType[0]?i.a.createElement(c.Fragment,null,this.props.edit?i.a.createElement("button",{className:"button red",onClick:this.discardChart},"Discard changes"):i.a.createElement("button",{className:"button red",onClick:this.discardChart},"Discard chart")):null,i.a.createElement(U,{setGrid:this.setGrid,customize:this.customize}),this.props.warn&&this.props.warn[0]?i.a.createElement("h5",null,this.props.warn):null)}}]),a}(c.Component);var le,oe=Object(f.b)(function(e){return{chart:e.chart,chartType:e.chartType,colors:e.colors,edit:e.edit,horizontal:e.horizontal,new:e.new,userId:e.userId,warn:e.warn}})(se),ce=function(e){return i.a.createElement("div",{className:"card",onClick:e.showChart},i.a.createElement("div",{className:"previewHeader"},i.a.createElement("h5",null,e.chart.data.options.title.text)),i.a.createElement("div",{className:"previewImgContainer"},"line"===e.chart.data.type?i.a.createElement("img",{className:"previewImg",alt:"line chart",src:"/assets/linePreview.png"}):"bar"===e.chart.data.type||"horizontalBar"===e.chart.data.type?i.a.createElement("img",{className:"previewImg",alt:"bar chart",src:"/assets/barPreview.png"}):"pie"===e.chart.data.type?i.a.createElement("img",{className:"previewImg",alt:"pie chart",src:"/assets/piePreview.png"}):null))},ie=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(d.a)(this,(e=Object(b.a)(a)).call.apply(e,[this].concat(r)))).chartRef=i.a.createRef(),t.getDisplayData=function(){var e;if(t.props.chart&&(e=L.cloneDeep(Object(o.a)({},t.props.chart.data))).data._datasets){var a=e.data._datasets;delete e.data._datasets,e.data.datasets=a}return e},t.buildChart=function(){var e=t.chartRef.current.getContext("2d");"undefined"!==typeof le&&le.destroy(),le=new V.a(e,t.getDisplayData())},t}return Object(y.a)(a,e),Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.chart&&(this.props.history.push("/charts/".concat(this.props.chart.id)),this.buildChart())}},{key:"componentDidUpdate",value:function(){this.props.chart&&(this.props.history.push("/charts/".concat(this.props.chart.id)),this.buildChart())}},{key:"render",value:function(){return this.props.chart?i.a.createElement("div",null,i.a.createElement("canvas",{id:"myChart",ref:this.chartRef}),i.a.createElement("button",{className:"button",onClick:this.props.editChart},"Edit chart"),i.a.createElement("button",{className:"button red",onClick:this.props.deleteChart},"Delete chart")):null}}]),a}(c.Component);var pe,ue=Object(f.b)(function(e){return{chart:e.chart}})(ie);var me=Object(f.b)(function(e){return{chart:e.chart}})(function(e){var a=i.a.createRef(),t=function(e){return JSON.stringify(e).replace(/'/g,"\\'").replace(/"/g,"'").replace("_datasets","datasets")};if(function(){if(e.chart){var a=L.cloneDeep(Object(o.a)({},e.chart.data));if(a.data.datasets){var n=a.data.datasets;delete a.data.datasets,a.data._datasets=n}pe=t(a)}return pe}()){var n="<script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js' crossorigin><\/script><canvas id='salp-chart'></canvas><script>new Chart(document.getElementById('salp-chart'),".concat(pe,");<\/script>");return i.a.createElement(c.Fragment,null,i.a.createElement("h5",null,"Click below to copy your chart's embed code:"),i.a.createElement("textarea",{className:"embedCode",value:n,onClick:function(){a.select(),document.execCommand("copy")},ref:function(e){a=e},readOnly:!0}))}return null}),he=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(d.a)(this,(e=Object(b.a)(a)).call.apply(e,[this].concat(r)))).state={gotCharts:!1},t.getCharts=function(){fetch("".concat(_,"/users/").concat(t.props.userId)).then(function(e){return e.json()}).then(function(e){z(e.charts,t.props)})},t.deleteChart=function(){var e=!1,a=t.props.charts.findIndex(function(e){return e.id===t.props.chart.id}),n=[].concat(Object(v.a)(t.props.charts.slice(0,a)),Object(v.a)(t.props.charts.slice(a+1)));fetch("".concat(_,"/charts/").concat(t.props.chart.id),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(function(a){return a.ok&&(e=!0),a.json()}).then(function(a){e&&(z(n,t.props),I(null,t.props),R(!1,t.props),t.props.history.push("/charts"))})},t.editChart=function(){var e=t.props.chart.data,a=[];e.data.labels.forEach(function(e){a=[].concat(Object(v.a)(a),[[e]])});for(var n=0;n<a.length;n++)a[n]=[].concat(Object(v.a)(a[n]),[e.data._datasets[0].data[n]]);t.props.dispatch({type:"SET_GRID",payload:a});var r=e.options.title.text;t.props.dispatch({type:"SET_TITLE",payload:r});var s=e.type;if(A(s,t.props),"line"!==s){var l=Object(v.a)(new Set(e.data._datasets[0].backgroundColor));t.props.dispatch({type:"SET_COLORS",payload:l})}if("pie"!==s){var o=!1;"horizontalBar"===e.type&&(o=!0),t.props.dispatch({type:"SET_HORIZONTAL",payload:o});var c=e.data._datasets[0].label;t.props.dispatch({type:"SET_LABEL",payload:c});var i=e.options.legend.display;t.props.dispatch({type:"SET_LABEL_DISPLAY",payload:i});var p=e.options.scales.yAxes[0].ticks.max;t.props.dispatch({type:"SET_MAX",payload:p});var u=e.options.scales.yAxes[0].ticks.min;t.props.dispatch({type:"SET_MIN",payload:u});var m=e.data._datasets[0].pointRadius;t.props.dispatch({type:"SET_RADIUS",payload:m});var h=e.options.scales.yAxes[0].ticks.stepSize;t.props.dispatch({type:"SET_TICKS",payload:h});var d=e.options.scales.xAxes[0].scaleLabel.labelString;t.props.dispatch({type:"SET_X_LABEL",payload:d});var b=e.options.scales.yAxes[0].scaleLabel.labelString;t.props.dispatch({type:"SET_Y_LABEL",payload:b})}if("line"===s){var y=e.data._datasets[0].borderColor;t.props.dispatch({type:"SET_COLOR",payload:y});var f=e.data._datasets[0].lineTension;t.props.dispatch({type:"SET_TENSION",payload:f})}t.props.history.push("/charts/".concat(t.props.chart.id,"/edit")),R(!0,t.props),t.props.dispatch({type:"SET_EDIT",payload:!0}),t.props.dispatch({type:"SET_ROWS",payload:0}),t.props.dispatch({type:"SET_SHOW_TABLE",payload:!0}),t.props.dispatch({type:"SET_INPUT",payload:"manual"})},t.showChart=function(e){R(!0,t.props),I(e,t.props)},t.renderPreviews=function(){return t.props.charts.map(function(e){return i.a.createElement(ce,{key:e.id,chart:e,showChart:function(){return t.showChart(e)}})})},t}return Object(y.a)(a,e),Object(h.a)(a,[{key:"componentDidMount",value:function(){P(this.props),this.props.chart||(this.props.history.push("/charts"),R(!1,this.props)),this.props.userId>0&&this.getCharts()}},{key:"componentDidUpdate",value:function(){this.props.userId>0&&!1===this.state.gotCharts&&0===this.props.charts.length&&(this.getCharts(),this.setState({gotCharts:!0}))}},{key:"render",value:function(){return i.a.createElement("div",{className:"container"},i.a.createElement("h4",{className:"customizationPaneHeader"},"Saved charts"),i.a.createElement("div",{className:"previewContainer"},this.props.charts?this.renderPreviews():null),i.a.createElement("div",{className:"container"},i.a.createElement(c.Fragment,null,this.props.chart?i.a.createElement(c.Fragment,null,i.a.createElement(ue,{editChart:this.editChart,deleteChart:this.deleteChart,history:this.props.history}),i.a.createElement(me,null)):this.props.charts[0]?i.a.createElement("h5",{className:"center"},"Click on a chart above to display it here"):i.a.createElement("h5",{className:"center"},"Looks like you don't have any charts yet"))))}}]),a}(c.Component);var de=Object(f.b)(function(e){return{userId:e.userId,charts:e.charts,chart:e.chart}})(he),be=t(12),ye=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(d.a)(this,(e=Object(b.a)(a)).call.apply(e,[this].concat(r)))).state={username:"",password:"",submitted:!1},t.handleChange=function(e){t.setState(Object(l.a)({},e.target.name,e.target.value))},t.handleSubmit=function(e){e.preventDefault(),t.setState({submitted:!0}),fetch("".concat(_,"/login"),{method:"POST",headers:{"Content-Type":"application/json",Accepts:"application/json"},body:JSON.stringify(t.state)}).then(function(e){return e.json()}).then(function(e){e.errors?(t.setState({submitted:!1}),alert(e.errors)):(t.setState({submitted:!1}),k.set("jwt",e.jwt),t.props.history.push("/charts"),H(e.user.id,t.props))})},t}return Object(y.a)(a,e),Object(h.a)(a,[{key:"componentDidMount",value:function(){R(!1,this.props)}},{key:"render",value:function(){return i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"customizationCardPie center"},i.a.createElement("h4",{className:"customizationHeader"},"Log in"),i.a.createElement(be.b,{className:"customizationHeader",to:"/signup"},"or sign up"),i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("label",{className:"smallHead",htmlFor:"username"},"Username"),i.a.createElement("input",{className:"customizationInput",name:"username",type:"text",value:this.state.username,onChange:this.handleChange}),i.a.createElement("label",{className:"smallHead",htmlFor:"password"},"Password"),i.a.createElement("input",{className:"customizationInput",name:"password",type:"password",value:this.state.password,onChange:this.handleChange}),this.state.submitted?i.a.createElement("div",{className:"center blockGif"},i.a.createElement("img",{src:"/assets/ajaxLoader.gif",alt:"loading"})):i.a.createElement("div",{className:"center blockButton"},i.a.createElement("button",{className:"button",type:"submit"},"Submit")))))}}]),a}(c.Component);var fe=Object(f.b)(function(e){return{userId:e.userId}})(ye),Ee=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(d.a)(this,(e=Object(b.a)(a)).call.apply(e,[this].concat(r)))).state={username:"",email:"",password:"",password_confirmation:"",submitted:!1},t.handleChange=function(e){t.setState(Object(l.a)({},e.target.name,e.target.value))},t.handleSubmit=function(e){e.preventDefault(),t.setState({submitted:!0}),t.state.password===t.state.password_confirmation?fetch("".concat(_,"/users"),{method:"POST",headers:{"Content-Type":"application/json",Accepts:"application/json"},body:JSON.stringify(t.state)}).then(function(e){return e.json()}).then(function(e){e.errors?(t.setState({submitted:!1}),alert(e.errors)):(t.setState({submitted:!1}),k.set("jwt",e.jwt),t.props.history.push("/charts"),H(e.user.id,t.props))}):(t.setState({submitted:!1}),alert("Sorry, those passwords don't match"))},t}return Object(y.a)(a,e),Object(h.a)(a,[{key:"componentDidMount",value:function(){R(!1,this.props)}},{key:"render",value:function(){return i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"customizationCardPie center"},i.a.createElement("h4",{className:"customizationHeader"},"Sign up"),i.a.createElement(be.b,{className:"customizationHeader",to:"/login"},"or log in"),i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("label",{className:"smallHead",htmlFor:"username"},"Username"),i.a.createElement("input",{className:"customizationInput",name:"username",type:"text",value:this.state.username,onChange:this.handleChange}),i.a.createElement("label",{className:"smallHead",htmlFor:"email"},"Email (optional)"),i.a.createElement("input",{className:"customizationInput",name:"email",type:"text",value:this.state.email,onChange:this.handleChange}),i.a.createElement("label",{className:"smallHead",htmlFor:"password"},"Password"),i.a.createElement("input",{className:"customizationInput",name:"password",type:"password",value:this.state.password,onChange:this.handleChange}),i.a.createElement("label",{className:"smallHead",htmlFor:"password"},"Confirm password"),i.a.createElement("input",{className:"customizationInput",name:"password_confirmation",type:"password",value:this.state.password_confirmation,onChange:this.handleChange}),this.state.submitted?i.a.createElement("div",{className:"center blockGif"},i.a.createElement("img",{src:"/assets/ajaxLoader.gif",alt:"loading"})):i.a.createElement("div",{className:"center blockButton"},i.a.createElement("button",{className:"button",type:"submit"},"Submit")))))}}]),a}(c.Component);var ve=Object(f.b)(function(e){return{userId:e.userId}})(Ee);var ge=Object(f.b)(function(e){return{edit:e.edit,new:e.new,userId:e.userId}})(function(e){return i.a.createElement("div",{className:"navBackground"},i.a.createElement("div",{className:"nav"},e.userId>0?i.a.createElement(c.Fragment,null,e.new?i.a.createElement("div",{className:"navButton left"},i.a.createElement(be.b,{to:"/charts",className:"white middleSmall",onClick:function(){I(null,e),D(e)}},"SAVED CHARTS")):e.edit?i.a.createElement("div",{className:"navButton left"},i.a.createElement(be.b,{to:"/charts",className:"white middleSmall",onClick:function(){I(null,e),D(e)}},"SAVED CHARTS")):i.a.createElement("div",{className:"navButton left"},i.a.createElement(be.b,{to:"/new",className:"white middleSmall",onClick:function(){I(null,e),F(e),R(!1,e)}},"NEW CHART"))):i.a.createElement("div",{className:"navButton left"})," ",e.userId>0?i.a.createElement("div",{className:"navButtonRight right"},i.a.createElement(be.b,{onClick:function(){k.remove("jwt"),I(null,e),D(e),A("",e),z([],e),H(0,e)},to:"/login",className:"white middleSmall"},"LOG OUT")):i.a.createElement("div",{className:"navButtonRight right"}),i.a.createElement("div",{className:"navButtonDead"},e.userId>0?i.a.createElement(be.b,{to:"/charts",className:"white middleLarge"},"SALP"):i.a.createElement(be.b,{to:"/login",className:"white middleLarge"},"SALP"))))});var Se=Object(f.b)(function(e){return{long:e.long}})(function(e){return i.a.createElement("div",{className:e.long?"footerBackground":"footerBackgroundShort"},i.a.createElement("div",{className:e.long?"footer":"footerShort"},i.a.createElement("div",{className:"footerText"},i.a.createElement("a",{className:"white",href:"https://davidfloyd91.github.io/about/",target:"_blank",rel:"noopener noreferrer"},"\xa9 2019 David Floyd")," | MIT License | davidfloyd91 at gmail | ",i.a.createElement("a",{className:"white",href:"https://davidfloyd91.github.io/pgp/",target:"_blank",rel:"noopener noreferrer"},"PGP key"))))}),Ce=function(e){function a(){return Object(m.a)(this,a),Object(d.a)(this,Object(b.a)(a).apply(this,arguments))}return Object(y.a)(a,e),Object(h.a)(a,[{key:"componentDidMount",value:function(){P(this.props)}},{key:"render",value:function(){return i.a.createElement(c.Fragment,null,i.a.createElement(ge,{history:this.props.history}),i.a.createElement("div",{className:"container"},i.a.createElement(E.d,null,i.a.createElement(E.b,{path:"/charts/:id/edit",render:function(e){return i.a.createElement(oe,e)}}),i.a.createElement(E.b,{path:"/charts/:id",render:function(e){return i.a.createElement(de,e)}}),i.a.createElement(E.b,{path:"/charts",render:function(e){return i.a.createElement(de,e)}}),i.a.createElement(E.b,{path:"/new",render:function(e){return i.a.createElement(oe,e)}}),i.a.createElement(E.b,{path:"/login",render:function(e){return i.a.createElement(fe,e)}}),i.a.createElement(E.b,{path:"/signup",render:function(e){return i.a.createElement(ve,e)}}),i.a.createElement(E.a,{exact:!0,from:"/",to:"/charts"}))),i.a.createElement(Se,null))}}]),a}(c.Component);var Oe=Object(f.b)(function(e){return{userId:e.userId,new:e.new,edit:e.edit}})(Ce);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Te=t(32),Ne={chartType:"",color:"#3c40c6",colors:["#ff3f34","#ffa801","#ffd32a","#05c46b","#0fbcf9","#575fcf"],columns:2,edit:!1,grid:[],horizontal:!1,input:"",label:"",labelDisplay:!0,max:10,min:-10,new:!1,radius:3,rows:10,showTable:!1,tension:.4,ticks:0,title:"",warn:"",xLabel:"",yLabel:""},we=Object(o.a)({chart:null,charts:[],chartType:"",userId:0,long:!1,pageScroll:null},Ne);var je=Object(Te.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_DEFAULT":return Object(o.a)({},e,Ne);case"SET_NAME_TO_VALUE":return Object(o.a)({},e,Object(l.a)({},a.payload.key,a.payload.value));case"SET_CHART":return Object(o.a)({},e,{chart:a.payload});case"SET_CHARTS":return Object(o.a)({},e,{charts:a.payload});case"SET_CHART_TYPE":return Object(o.a)({},e,{chartType:a.payload});case"SET_COLOR":return Object(o.a)({},e,{color:a.payload});case"SET_COLORS":return Object(o.a)({},e,{colors:a.payload});case"SET_COLUMNS":return Object(o.a)({},e,{columns:a.payload});case"SET_EDIT":return Object(o.a)({},e,{edit:a.payload});case"SET_GRID":return Object(o.a)({},e,{grid:a.payload});case"SET_HORIZONTAL":return Object(o.a)({},e,{horizontal:a.payload});case"SET_INPUT":return Object(o.a)({},e,{input:a.payload});case"SET_LABEL":return Object(o.a)({},e,{label:a.payload});case"SET_LABEL_DISPLAY":return Object(o.a)({},e,{labelDisplay:a.payload});case"TOGGLE_LABEL_DISPLAY":return Object(o.a)({},e,{labelDisplay:!e.labelDisplay});case"SET_LONG":return Object(o.a)({},e,{long:a.payload});case"SET_MAX":return Object(o.a)({},e,{max:a.payload});case"SET_MIN":return Object(o.a)({},e,{min:a.payload});case"TOGGLE_NEW":return Object(o.a)({},e,{new:!e.new});case"SET_PAGE_SCROLL":return Object(o.a)({},e,{pageScroll:a.payload});case"SET_RADIUS":return Object(o.a)({},e,{radius:a.payload});case"SET_ROWS":return Object(o.a)({},e,{rows:a.payload});case"SET_SHOW_TABLE":return Object(o.a)({},e,{showTable:a.payload});case"SET_TENSION":return Object(o.a)({},e,{tension:a.payload});case"SET_TICKS":return Object(o.a)({},e,{ticks:a.payload});case"SET_TITLE":return Object(o.a)({},e,{title:a.payload});case"SET_USER_ID":return Object(o.a)({},e,{userId:a.payload});case"WARN":return Object(o.a)({},e,{warn:a.payload});case"SET_X_LABEL":return Object(o.a)({},e,{xLabel:a.payload});case"SET_Y_LABEL":return Object(o.a)({},e,{yLabel:a.payload});default:return e}});u.a.render(i.a.createElement(f.a,{store:je},i.a.createElement(be.a,null,i.a.createElement(E.b,{path:"/",component:Oe}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},21:function(e,a,t){},53:function(e,a,t){e.exports=t(101)},58:function(e,a,t){},78:function(e,a){},80:function(e,a){}},[[53,1,2]]]);
//# sourceMappingURL=main.98e11d5b.chunk.js.map